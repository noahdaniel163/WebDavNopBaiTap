<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% if logged_in %}Trang Qu·∫£n Tr·ªã Gi√°o Vi√™n{% else %}N·ªôp B√†i T·∫≠p{% endif %}</title>
    <style>
        body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif; max-width: 900px; margin: 0 auto; padding: 20px; background-color: #f4f4f9; }
        header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 30px; }
        h1 { color: #333; margin: 0; }
        .upload-section { background: #fff; padding: 40px; border-radius: 8px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); text-align: center; margin-bottom: 40px; }
        .file-list { background: #fff; border-radius: 8px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); overflow: hidden; }
        .file-item { display: flex; justify-content: space-between; padding: 15px 25px; border-bottom: 1px solid #eee; align-items: center; }
        .file-item:last-child { border-bottom: none; }
        .file-item a.file-link { text-decoration: none; color: #007bff; font-weight: 500; font-size: 1.1em; }
        .file-item a.file-link:hover { text-decoration: underline; }
        
        .btn { padding: 10px 20px; border: none; border-radius: 4px; cursor: pointer; text-decoration: none; display: inline-block; }
        .btn-primary { background: #007bff; color: white; font-size: 1.1em; }
        .btn-primary:hover { background: #0056b3; }
        .btn-danger { background: #dc3545; color: white; padding: 5px 15px; font-size: 0.9em; }
        .btn-danger:hover { background: #c82333; }
        .btn-outline { border: 1px solid #007bff; color: #007bff; background: transparent; }
        .btn-outline:hover { background: #007bff; color: white; }

        input[type="file"] { margin: 20px 0; display: block; width: 100%; text-align: center; }
        .alert { padding: 15px; background-color: #d4edda; color: #155724; border-radius: 4px; margin-bottom: 20px; text-align: center; border: 1px solid #c3e6cb;}
        
        .login-link { text-decoration: none; color: #6c757d; font-size: 0.9em; }
        .login-link:hover { color: #333; text-decoration: underline; }

        .hidden-student { text-align: center; color: #666; margin-top: 50px; font-style: italic; }
    </style>
</head>
<body>

    <header>
        <h1>{% if logged_in %}üìÇ Qu·∫£n L√Ω B√†i T·∫≠p{% else %}üìù N·ªôp B√†i T·∫≠p{% endif %}</h1>
        <div>
            {% if logged_in %}
                <span style="margin-right: 15px;">Xin ch√†o, <b>Gi√°o vi√™n</b></span>
                <a href="/logout" class="btn btn-outline">ƒêƒÉng xu·∫•t</a>
            {% else %}
                <a href="/login" class="login-link">üîí Gi√°o vi√™n ƒëƒÉng nh·∫≠p</a>
            {% endif %}
        </div>
    </header>

    {% with messages = get_flashed_messages() %}
        {% if messages %}
            <div class="alert">{{ messages[0] }}</div>
        {% endif %}
    {% endwith %}

    <div class="upload-section">
        <h3>Ch·ªçn file b√†i t·∫≠p ƒë·ªÉ n·ªôp</h3>
        <p style="color: #666; margin-bottom: 20px;">H·ªá th·ªëng s·∫Ω t·ª± ƒë·ªông ƒë·ªïi t√™n n·∫øu tr√πng file.</p>
        <form action="/upload" method="post" enctype="multipart/form-data">
            <input type="file" name="file" required>
            <button type="submit" class="btn btn-primary">‚¨ÜÔ∏è T·∫£i L√™n Ngay</button>
        </form>
    </div>

    {% if logged_in %}
    <div class="file-list">
        <div class="file-item" style="background: #e9ecef; font-weight: bold;">
            <span>T√™n File</span>
            <span>Thao t√°c</span>
        </div>
        {% for file in files %}
        <div class="file-item">
            <a href="/download/{{ file }}" class="file-link" target="_blank">{{ file }}</a>
            <form action="/delete/{{ file }}" method="post" style="display:inline;">
                <button type="submit" class="btn btn-danger" onclick="return confirm('X√≥a b√†i t·∫≠p n√†y?')">X√≥a</button>
            </form>
        </div>
        {% else %}
        <div class="file-item">
            <span>Ch∆∞a c√≥ b√†i t·∫≠p n√†o ƒë∆∞·ª£c n·ªôp.</span>
        </div>
        {% endfor %}
    </div>
    {% else %}
    <div class="hidden-student">
        <p>Danh s√°ch file b·ªã ·∫©n. Ch·ªâ gi√°o vi√™n m·ªõi c√≥ quy·ªÅn xem danh s√°ch b√†i t·∫≠p.</p>
    </div>
    {% endif %}

</body>
</html>
